(()=>{var e={738:(e,t,n)=>{const o=n(147),r=n(17),s=n(37);function i(e){console.log(`[dotenv][DEBUG] ${e}`)}const a=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,p=/\\n/g,d=/\r\n|\n|\r/;function c(e,t){const n=Boolean(t&&t.debug),o={};return e.toString().split(d).forEach((function(e,t){const r=e.match(a);if(null!=r){const e=r[1];let t=r[2]||"";const n=t.length-1,s='"'===t[0]&&'"'===t[n];"'"===t[0]&&"'"===t[n]||s?(t=t.substring(1,n),s&&(t=t.replace(p,"\n"))):t=t.trim(),o[e]=t}else n&&i(`did not match key and value when parsing line ${t+1}: ${e}`)})),o}e.exports.config=function(e){let t=r.resolve(process.cwd(),".env"),n="utf8",a=!1;var p;e&&(null!=e.path&&(t="~"===(p=e.path)[0]?r.join(s.homedir(),p.slice(1)):p),null!=e.encoding&&(n=e.encoding),null!=e.debug&&(a=!0));try{const e=c(o.readFileSync(t,{encoding:n}),{debug:a});return Object.keys(e).forEach((function(t){Object.prototype.hasOwnProperty.call(process.env,t)?a&&i(`"${t}" is already defined in \`process.env\` and will not be overwritten`):process.env[t]=e[t]})),{parsed:e}}catch(e){return{error:e}}},e.exports.parse=c},21:(e,t,n)=>{"use strict";n.r(t),n.d(t,{NIL:()=>j,parse:()=>g,stringify:()=>l,v1:()=>h,v3:()=>v,v4:()=>m,v5:()=>T,validate:()=>d,version:()=>O});const o=require("crypto");var r=n.n(o);const s=new Uint8Array(256);let i=s.length;function a(){return i>s.length-16&&(r().randomFillSync(s),i=0),s.slice(i,i+=16)}const p=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(e){return"string"==typeof e&&p.test(e)},c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).substr(1));const l=function(e,t=0){const n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!d(n))throw TypeError("Stringified UUID is invalid");return n};let u,f,y=0,b=0;const h=function(e,t,n){let o=t&&n||0;const r=t||new Array(16);let s=(e=e||{}).node||u,i=void 0!==e.clockseq?e.clockseq:f;if(null==s||null==i){const t=e.random||(e.rng||a)();null==s&&(s=u=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==i&&(i=f=16383&(t[6]<<8|t[7]))}let p=void 0!==e.msecs?e.msecs:Date.now(),d=void 0!==e.nsecs?e.nsecs:b+1;const c=p-y+(d-b)/1e4;if(c<0&&void 0===e.clockseq&&(i=i+1&16383),(c<0||p>y)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");y=p,b=d,f=i,p+=122192928e5;const h=(1e4*(268435455&p)+d)%4294967296;r[o++]=h>>>24&255,r[o++]=h>>>16&255,r[o++]=h>>>8&255,r[o++]=255&h;const g=p/4294967296*1e4&268435455;r[o++]=g>>>8&255,r[o++]=255&g,r[o++]=g>>>24&15|16,r[o++]=g>>>16&255,r[o++]=i>>>8|128,r[o++]=255&i;for(let e=0;e<6;++e)r[o+e]=s[e];return t||l(r)},g=function(e){if(!d(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function w(e,t,n){function o(e,o,r,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof o&&(o=g(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+e.length);if(i.set(o),i.set(e,o.length),i=n(i),i[6]=15&i[6]|t,i[8]=63&i[8]|128,r){s=s||0;for(let e=0;e<16;++e)r[s+e]=i[e];return r}return l(i)}try{o.name=e}catch(e){}return o.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",o.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",o}const v=w("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),r().createHash("md5").update(e).digest()})),m=function(e,t,n){const o=(e=e||{}).random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return l(o)},T=w("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),r().createHash("sha1").update(e).digest()})),j="00000000-0000-0000-0000-000000000000",O=function(e){if(!d(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},145:(e,t,n)=>{const o=n(246),r=n(61);e.exports={person:r,shared:o}},228:(e,t,n)=>{const{v4:o}=n(21);e.exports=(e,t)=>{if(e.body.hasOwnProperty("name"))if(e.body.hasOwnProperty("age"))if(e.body.hasOwnProperty("hobbies"))if("string"!=typeof e.body.name)t.writeHead(400,{"Content-Type":"application/json"}),t.end("Option 'name' should be string ");else if("number"!=typeof e.body.age)t.writeHead(400,{"Content-Type":"application/json"}),t.end("Option 'age' should be number ");else if("object"!=typeof e.body.hobbies||e.body.hobbies.length>0&&!e.body.hobbies.every((e=>"string"==typeof e)))t.writeHead(400,{"Content-Type":"application/json"}),t.end("Option 'hobbies' should be array of strings or empty array ");else{const n={...e.body,id:o()};e.person.push(n),t.writeHead(201,{"Content-Type":"application/json"}),t.end(JSON.stringify(n))}else t.writeHead(400,{"Content-Type":"application/json"}),t.end("Option 'hobbies' is required ");else t.writeHead(400,{"Content-Type":"application/json"}),t.end("Option 'age' is required ");else t.writeHead(400,{"Content-Type":"application/json"}),t.end("Option 'name' is required ")}},817:(e,t,n)=>{const{validate:o}=n(21),{forEach:r}=n(153);e.exports=(e,t)=>{const n=e.url.split("/").pop();if(o(n))if(e.person.findIndex((e=>e.id===n))>-1){let o=!1,r=[];for(;!o;){const t=e.person.pop();t.id===n?o=!0:r.push(t)}r.forEach((t=>e.person.push(t))),t.writeHead(204,{"Content-Type":"application/json"}),t.end()}else t.writeHead(404,{"Content-Type":"application/json"}),t.end(`User with id:${n} not found`);else t.writeHead(400,{"Content-Type":"application/json"}),t.end("Id is not valid")}},42:e=>{e.exports=(e,t)=>{t.setHeader("Content-Type","application/json"),t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(e.person))}},818:e=>{e.exports=(e,t,n)=>{let o=[];e.on("data",(e=>{o.push(e)})),e.on("end",(()=>{e.body=Buffer.concat(o).toString(),"application/json"===e.headers["content-type"]&&(e.body=JSON.parse(e.body)),n(e,t)}))}},340:(e,t,n)=>{const{validate:o}=n(21);e.exports=(e,t)=>{const n=e.url.split("/").pop();if(o(n)){const o=e.person.find((e=>e.id===n));o?(t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(o))):(t.writeHead(404,{"Content-Type":"application/json"}),t.end(`User with id:${n} not found`))}else t.writeHead(400,{"Content-Type":"application/json"}),t.end("Id is not valid")}},61:(e,t,n)=>{const o=n(42),r=n(340),s=n(228),i=n(197),a=n(817),p=n(818);e.exports={getAll:o,getOne:r,create:(e,t)=>p(e,t,s),update:(e,t)=>p(e,t,i),delete:a}},197:(e,t,n)=>{const{validate:o}=n(21);e.exports=(e,t)=>{const n=e.url.split("/").pop();if(o(n)){const o=e.person.findIndex((e=>e.id===n));o>-1?e.body.hasOwnProperty("id")?(t.writeHead(400,{"Content-Type":"application/json"}),t.end("The body must not contain any ID")):e.body.hasOwnProperty("name")&&"string"!=typeof e.body.name?(t.writeHead(400,{"Content-Type":"application/json"}),t.end("Option 'name' should be string ")):e.body.hasOwnProperty("age")&&"number"!=typeof e.body.age?(t.writeHead(400,{"Content-Type":"application/json"}),t.end("Option 'age' should be number ")):e.body.hasOwnProperty("hobbies")&&"object"!=typeof e.body.hobbies||e.body.hobbies.length>0&&!e.body.hobbies.every((e=>"string"==typeof e))?(t.writeHead(400,{"Content-Type":"application/json"}),t.end("Option 'hobbies' should be array of strings or empty array ")):(e.person[o]={...e.person[o],...e.body},t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(e.person[o]))):(t.writeHead(404,{"Content-Type":"application/json"}),t.end(`User with id:${n} not found`))}else t.writeHead(400,{"Content-Type":"application/json"}),t.end("Id is not valid")}},259:e=>{e.exports=(e,t)=>{t.writeHead(500,{"Content-Type":"application/json"}),t.end("Something went wrong")}},246:(e,t,n)=>{const o=n(347),r=n(259);e.exports={noValidRoute:o,error:r}},347:e=>{e.exports=(e,t,n)=>{t.writeHead(404,{"Content-Type":"application/json"}),t.end(`Introduced non-existent route ${e.url}. ${n}`)}},28:(e,t,n)=>{const o=n(153);e.exports={person:o}},153:e=>{e.exports=[{id:"528e2bed-f8d6-4aae-9b9c-d4fa645ba8ee",name:"user",age:20,hobbies:[]},{id:"89f160e8-14b3-4616-bd1d-432b7760fb31",name:"user2",age:30,hobbies:["football","guitar"]}]},895:(e,t,n)=>{const{person:o,shared:r}=n(145);e.exports=(e,t)=>{/\/person\/[0-9a-z\-]+/g.test(e.url)?o.delete(e,t):r.noValidRoute(e,t)}},116:(e,t,n)=>{const{person:o,shared:r}=n(145);e.exports=(e,t)=>{"/person"===e.url?o.getAll(e,t):/\/person\/[0-9a-z\-]+/g.test(e.url)?o.getOne(e,t):r.noValidRoute(e,t)}},348:(e,t,n)=>{const o=n(116),r=n(125),s=n(622),i=n(895);e.exports={getMethod:o,postMethod:r,putMethod:s,deleteMethod:i}},125:(e,t,n)=>{const{person:o,shared:r}=n(145);e.exports=(e,t)=>{"/person"===e.url?o.create(e,t):r.noValidRoute(e,t)}},622:(e,t,n)=>{const{person:o,shared:r}=n(145);e.exports=(e,t)=>{/\/person\/[0-9a-z\-]+/g.test(e.url)?o.update(e,t):r.noValidRoute(e,t)}},147:e=>{"use strict";e.exports=require("fs")},685:e=>{"use strict";e.exports=require("http")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(738).config();const e=n(685),{person:t}=n(28),{shared:o}=n(145),{getMethod:r,postMethod:s,putMethod:i,deleteMethod:a}=n(348),p=process.env.PORT||4e3;e.createServer(((e,n)=>{e.person=t;try{switch(e.method){case"GET":r(e,n);break;case"POST":s(e,n);break;case"PUT":i(e,n);break;case"DELETE":a(e,n);break;default:n.writeHead(400,{"Content-Type":"application/json"}),n.end("No Response")}}catch(t){o.error(e,n)}})).listen(p,(e=>{e?console.error(e):console.log(`listening on port ${p}`)}))})()})();